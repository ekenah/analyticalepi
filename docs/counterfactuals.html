<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>14&nbsp; Potential Outcomes and Attributable Risk – Analytical Epidemiology</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./dags.html" rel="next">
<link href="./causality.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-747bc48f972f7c4036e4d8e8c6d9e55a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script>
  window.MathJax = {
    loader: {load: ['[tex]/centernot']},
    tex: {
      macros: {
        A: "\\mathcal\{A\}",
        approxsim: "\\stackrel\{\\text\{approx\}\}\{\\sim\}",
        AR: "\\text\{AR\}",
        B: "\\mathcal\{B\}",
        Bernoulli: ["\\operatorname\{Bernoulli\}"],
        binomial: ["\\operatorname\{binomial\}"],
        C: "\\mathcal\{C\}",
        chisqH: "\\chi^2_\\text\{H\}",
        chisqP: "\\chi^2_\\text\{P\}",
        chisqPobs: "\\chi^2_\\text\{Pobs\}",
        cHR: "\\text\{cHR\}",
        CHR: "\\text\{CHR\}",
        cloglog: ["\\operatorname\{cloglog\}"],
        comp: "\\mathsf\{C\}",
        Cov: ["\\operatorname\{Cov\}"],
        crude: "\\text\{crude\}",
        D: "\\mathcal\{D\}",
        data: "\\text\{data\}",
        dif: "\\text\{d\}",
        Dminus: "\\text\{D\}^-",
        Dplus: "\\text\{D\}^+",
        E: ["\\operatorname\{\\mathbb\{E\}\}"],
        ESSR: "\\text\{ESSR\}",
        expit: ["\\operatorname\{expit\}"],
        given: ["\\, #1| \\, ", 1],
        HR: "\\text\{HR\}",
        indep: "\\perp\\!\\!\\!\\perp",
        indicator: "\\mathbb\{1\}",
        IRR: "\\text\{IRR\}",
        K: "\\mathcal\{K\}",
        logit: ["\\operatorname\{logit\}"],
        margins: "\\text\{margins\}",
        obs: "\\text\{obs\}",
        odds: ["\\operatorname\{odds\}"],
        OR: "\\text\{OR\}",
        pa: "\\text\{pa\}",
        PAR: "\\text\{PAR\}",
        pcrude: "p^*\_\\text\{crude\}",
        pmarg: "p\_\\text\{marg\}",
        Prstd: "\\Pr\\nolimits\_\\text\{std\}",
        ptrue: "p_\{\\text\{true\}\}",
        R: "\\mathcal\{R\}",
        RD: "\\text\{RD\}",
        RR: "\\text\{RR\}",
        sens: "\\text\{sens\}",
        spec: "\\text\{spec\}",
        std: "\\text\{std\}",
        supp: ["\\operatorname\{supp\}"],
        tcens: "t^\\text\{cens\}",
        tentry: "t^\\text\{entry\}",
        tevent: "t^\\text\{event\}",
        texit: "t^\\text\{exit\}",
        Tminus: "\\text\{T\}^-",
        tonset: "t^\\text\{onset\}",
        Tplus: "\\text\{T\}^+",
        transpose: "\\mathsf{T}",
        trec: "t^\\text\{rec\}",
        true: "\\text\{true\}",
        twobytwo: "2 \\times 2",
        vand: "\\text\{ and \}",
        Var: ["\\operatorname\{Var\}"],
        Xminus: "\\text\{X\}^-",
        Xobs: "\\text\{X\}^\\text\{obs\}",
        Xplus: "\\text\{X\}^+"
      }
    }
  };
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./causality.html">Principles of Causal Inference</a></li><li class="breadcrumb-item"><a href="./counterfactuals.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Potential Outcomes and Attributable Risk</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Analytical Epidemiology</a> 
        <div class="sidebar-tools-main">
    <a href="./Analytical-Epidemiology.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Defining and Measuring Disease Occurrence</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Probability, Random Variables, and Disease Occurrence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./condprob.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Conditional Probability and Diagnostic Tests</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlestimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Maximum Likelihood Estimation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Bayesian Estimation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./longitudinal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Longitudinal Data, Rates, and Counts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./survival.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">One-Sample Survival Analysis</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Study Design and Measures of Association</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./studydesign.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Cohort and Case-Control Studies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./validity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Internal and External Validity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cohort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Measures of Association in Cohort Studies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./survival2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Two-Sample Survival Analysis and the Cox Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./casecontrol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Design and Analysis of Case-Control and Case-Cohort studies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bayes2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Bayesian analysis of cohort and case-control studies</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Principles of Causal Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./causality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Causality in Public Health</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./counterfactuals.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Potential Outcomes and Attributable Risk</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dags.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Confounding and Selection Bias on DAGs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./swigs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Confounding and Selection Bias on SWIGs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./standardization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Causal Effects and Standardization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./geometry.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Geometry of Causal Inference</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Epidemologic and Statistical Methods for Causal Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stratification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Stratified Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./matching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Matching in Cohort and Case-Control Studies</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./calculus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Calculus</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#potential-outcomes" id="toc-potential-outcomes" class="nav-link active" data-scroll-target="#potential-outcomes"><span class="header-section-number">14.1</span> Potential outcomes</a>
  <ul class="collapse">
  <li><a href="#sec-causal-effect" id="toc-sec-causal-effect" class="nav-link" data-scroll-target="#sec-causal-effect"><span class="header-section-number">14.1.1</span> Measures of causal effect</a></li>
  <li><a href="#sec-exchangeability-intro" id="toc-sec-exchangeability-intro" class="nav-link" data-scroll-target="#sec-exchangeability-intro"><span class="header-section-number">14.1.2</span> Confounding and exchangeability</a></li>
  <li><a href="#sec-selectionbias-intro" id="toc-sec-selectionbias-intro" class="nav-link" data-scroll-target="#sec-selectionbias-intro"><span class="header-section-number">14.1.3</span> Selection bias and the analytic cohort condition</a></li>
  </ul></li>
  <li><a href="#attributable-risk" id="toc-attributable-risk" class="nav-link" data-scroll-target="#attributable-risk"><span class="header-section-number">14.2</span> Attributable risk</a>
  <ul class="collapse">
  <li><a href="#sufficient-component-cause-model-causal-pies" id="toc-sufficient-component-cause-model-causal-pies" class="nav-link" data-scroll-target="#sufficient-component-cause-model-causal-pies"><span class="header-section-number">14.2.1</span> Sufficient-component cause model (causal pies)</a></li>
  <li><a href="#attributable-risk-among-the-exposed" id="toc-attributable-risk-among-the-exposed" class="nav-link" data-scroll-target="#attributable-risk-among-the-exposed"><span class="header-section-number">14.2.2</span> Attributable risk among the exposed</a></li>
  <li><a href="#population-attributable-risk" id="toc-population-attributable-risk" class="nav-link" data-scroll-target="#population-attributable-risk"><span class="header-section-number">14.2.3</span> Population attributable risk</a></li>
  <li><a href="#dependence-on-time-interval" id="toc-dependence-on-time-interval" class="nav-link" data-scroll-target="#dependence-on-time-interval"><span class="header-section-number">14.2.4</span> Dependence on time interval</a></li>
  <li><a href="#adding-up-attributable-risks" id="toc-adding-up-attributable-risks" class="nav-link" data-scroll-target="#adding-up-attributable-risks"><span class="header-section-number">14.2.5</span> Adding up attributable risks</a></li>
  </ul></li>
  <li><a href="#excess-and-etiologic-cases" id="toc-excess-and-etiologic-cases" class="nav-link" data-scroll-target="#excess-and-etiologic-cases"><span class="header-section-number">14.3</span> Excess and etiologic cases</a>
  <ul class="collapse">
  <li><a href="#excess-and-etiologic-fractions" id="toc-excess-and-etiologic-fractions" class="nav-link" data-scroll-target="#excess-and-etiologic-fractions"><span class="header-section-number">14.3.1</span> Excess and etiologic fractions</a></li>
  <li><a href="#limitations-of-the-etiologic-fraction" id="toc-limitations-of-the-etiologic-fraction" class="nav-link" data-scroll-target="#limitations-of-the-etiologic-fraction"><span class="header-section-number">14.3.2</span> Limitations of the etiologic fraction</a></li>
  </ul></li>
  <li><a href="#sensitivity-analysis" id="toc-sensitivity-analysis" class="nav-link" data-scroll-target="#sensitivity-analysis"><span class="header-section-number">14.4</span> Sensitivity analysis</a>
  <ul class="collapse">
  <li><a href="#cornfields-inequality" id="toc-cornfields-inequality" class="nav-link" data-scroll-target="#cornfields-inequality"><span class="header-section-number">14.4.1</span> Cornfield’s inequality</a></li>
  <li><a href="#e-values" id="toc-e-values" class="nav-link" data-scroll-target="#e-values"><span class="header-section-number">14.4.2</span> E-values</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./causality.html">Principles of Causal Inference</a></li><li class="breadcrumb-item"><a href="./counterfactuals.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Potential Outcomes and Attributable Risk</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Potential Outcomes and Attributable Risk</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<blockquote class="blockquote">
<p>Epidemiology is often defined in terms of study of the determinants of the distribution of the disease; but we should not forget that the more widespread is a particular cause, the less it explains the distribution of cases. The hardest cause to identify is the one that is universally present, for then it has no influence on the distribution of disease. <span class="citation" data-cites="rose1985sick">(<a href="references.html#ref-rose1985sick" role="doc-biblioref">Rose 1985</a>)</span></p>
</blockquote>
<section id="potential-outcomes" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="potential-outcomes"><span class="header-section-number">14.1</span> Potential outcomes</h2>
<p>Association is not causation. But why not? To understand the distinction, it is crucial to consider the difference between observation and intervention. Let <span class="math inline">\(X\)</span> be an indicator of a binary exposure, with <span class="math inline">\(X = 1\)</span> in the exposed and <span class="math inline">\(X = 0\)</span> in the unexposed. Suppose we define a time scale and time interval <span class="math inline">\((0, t]\)</span> during which we measure the occurrence of disease. Each study participant would have two <strong>potential outcomes</strong> <span class="citation" data-cites="rubin1974estimating">(<a href="references.html#ref-rubin1974estimating" role="doc-biblioref">Rubin 1974</a>)</span>: The potential outcome <span class="math inline">\(D^1\)</span> is their outcome under exposure (<span class="math inline">\(X = 1\)</span>) and the potential outcome <span class="math inline">\(D^0\)</span> is their outcome under no exposure (<span class="math inline">\(X = 0\)</span>). These potential outcomes are random variables <span class="math inline">\(D^1(\omega)\)</span> and <span class="math inline">\(D^0(\omega)\)</span> defined for each individual <span class="math inline">\(\omega\)</span> in our population <span class="math inline">\(\Omega\)</span>. <a href="#tbl-poutcomes" class="quarto-xref">Table&nbsp;<span>14.1</span></a> shows the four possible combinations of potential outcomes for an individual <span class="math inline">\(\omega\)</span>, which are often called <strong>causal types</strong></p>
<div id="tbl-poutcomes" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-poutcomes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;14.1: Causal types from <span class="citation" data-cites="greenland1986identifiability">Greenland and Robins (<a href="references.html#ref-greenland1986identifiability" role="doc-biblioref">1986</a>)</span>.
</figcaption>
<div aria-describedby="tbl-poutcomes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;"><span class="math inline">\(D^1 = 1\)</span></th>
<th style="text-align: center;"><span class="math inline">\(D^1 = 0\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(D^0 = 1\)</span></td>
<td style="text-align: center;">No effect (doomed)</td>
<td style="text-align: center;">Exposure preventive</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(D^0 = 0\)</span></td>
<td style="text-align: center;">Exposure causative</td>
<td style="text-align: center;">No effect (immune)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>If we could see both <span class="math inline">\(D^0\)</span> and <span class="math inline">\(D^1\)</span> for a single individual, we would know whether treatment was harmful, neutral, or beneficial for them. However, we can usually see at most one of these outcomes. If <span class="math inline">\(\omega\)</span> is exposed, we see <span class="math inline">\(D^1(\omega)\)</span> but not <span class="math inline">\(D^0(\omega)\)</span>. If <span class="math inline">\(\omega\)</span> is unexposed, we see <span class="math inline">\(D^0(\omega)\)</span> but not <span class="math inline">\(D^1(\omega)\)</span>. A perfect epidemiological study would require a time machine: We would first measure the risk of disease in the study population when everyone is exposed. Then we would go back in time, prevent exposure for them all, and measure the risk of disease over the same time interval. Any measure of the difference in disease occurrence between these two parallel timelines would represent a causal effect of exposure. <!-- Bound by the laws of physics and ethics, we must approximate this using counterfactual comparison using observable data. --> <!-- The assumption that the potential outcome $D^x$ equals the observed outcome when the exposure $X = x$ is called **consistency** --> <!-- A hypothetical comparison to a condition that did not occur, such as comparing $D^1_j$ and $D^0_j$, is called a \emph{counterfactual} comparison. --></p>
<section id="sec-causal-effect" class="level3" data-number="14.1.1">
<h3 data-number="14.1.1" class="anchored" data-anchor-id="sec-causal-effect"><span class="header-section-number">14.1.1</span> Measures of causal effect</h3>
<p>The <strong>counterfactual risk</strong> under exposure in the population <span class="math inline">\(\Omega\)</span> is <span class="math display">\[
  \Pr(D^1 = 1),
\]</span> and the counterfactual risk under no exposure is <span class="math display">\[
  \Pr(D^0 = 1).
\]</span> Using these counterfactual risks, we can express a causal effect in terms of any of our measures of association from <a href="cohort.html" class="quarto-xref"><span>Chapter 9</span></a>. The causal risk difference is <span class="math display">\[
  \RD = \Pr(D^1 = 1) - \Pr(D^0 = 0),
\]</span> the causal risk ratio is <span class="math display">\[
  \RR = \frac{\Pr(D^1 = 1)}{\Pr(D^0 = 1)},
\]</span> and the causal odds ratio is <span class="math display">\[
  \OR = \frac{\odds\bigl(\Pr(D^1 = 1)\bigr)}{\odds\bigl(\Pr(D^0 = 1)\bigr)},
\]</span> where <span class="math inline">\(\odds(p) = p / (1 - p)\)</span>. When an exposure <span class="math inline">\(X\)</span> is not binary, these measures can be calculated for any two distinct levels of <span class="math inline">\(X\)</span>.</p>
</section>
<section id="sec-exchangeability-intro" class="level3" data-number="14.1.2">
<h3 data-number="14.1.2" class="anchored" data-anchor-id="sec-exchangeability-intro"><span class="header-section-number">14.1.2</span> Confounding and exchangeability</h3>
<p>When we cannot see our population under both exposure and no exposure, we cannot calculate <span class="math inline">\(\Pr(D^1 = 1)\)</span> or <span class="math inline">\(\Pr(D^0 = 1)\)</span> directly. If our population contains both exposed and unexposed individuals, we can estimate <span class="math display">\[
  \Pr(D = 1 \given{} X = 1)
\]</span> and <span class="math display">\[
  \Pr(D = 1 \given{} X = 0).
\]</span> We have <strong>confounding</strong> when <span class="math display">\[
  \Pr(D = 1 \given{} X = x) \neq \Pr(D^x = 1)
\]</span> for <span class="math inline">\(x = 1\)</span> or <span class="math inline">\(x = 0\)</span>. When we have confounding, we cannot use the conditional risks of disease given exposure to calculate the measures of causal effect from <a href="#sec-causal-effect" class="quarto-xref"><span>Section 14.1.1</span></a>. Confounding can occur when there is an unobserved common cause of <span class="math inline">\(X\)</span> and <span class="math inline">\(D\)</span>, which results in an association between <span class="math inline">\(X\)</span> and <span class="math inline">\(D\)</span> in the population that differs from the causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(D\)</span> <span class="citation" data-cites="pearl1993bayesian pearl1995causal">(<a href="references.html#ref-pearl1993bayesian" role="doc-biblioref">Pearl 1993</a>, <a href="references.html#ref-pearl1995causal" role="doc-biblioref">1995</a>)</span>.</p>
<p>To avoid confounding, we need <strong>exchangeability</strong> of the potential disease outcomes given exposure, which means that <span class="math display">\[
  D^x \indep X
\]</span> for all possible values <span class="math inline">\(x\)</span> of <span class="math inline">\(X\)</span> <span class="citation" data-cites="rosenbaum1983central">(<a href="references.html#ref-rosenbaum1983central" role="doc-biblioref">Rosenbaum and Rubin 1983</a>)</span>. In other words, the <em>potential outcomes</em> are independent of the <em>realized exposure</em>. If exposure causes disease, the realized disease outcomes will not be independent of exposure. To see why, imagine that <span class="math inline">\(D^1(\omega) = 1\)</span> and <span class="math inline">\(D^0(\omega) = 0\)</span> for all individuals <span class="math inline">\(\omega\)</span> in our population <span class="math inline">\(\Omega\)</span>. Then the realized disease outcome <span class="math inline">\(D = X\)</span>, but we have exchangeability because all <span class="math inline">\(\omega \in \Omega\)</span> have the same potential outcomes.</p>
<p>Under exchangeability, we get <span class="math display">\[
  \begin{aligned}
    \Pr(D^x = 1)
    &amp;= \Pr(D^x = 1 \given{} X = x)  &amp;&amp;\text{by exchangeability} \\
    &amp;= \Pr(D = 1 \given{} X = x)    &amp;&amp;\text{by consistency}.
  \end{aligned}
\]</span> Therefore, we can estimate the counterfactual risks by calculating the conditional risks of disease given <span class="math inline">\(X\)</span>. We can then use these to estimate the measures of causal effect from <a href="#sec-causal-effect" class="quarto-xref"><span>Section 14.1.1</span></a>.</p>
<p>When exchangeability fails, we might still have <strong>conditional exchangeability</strong> given a set of covariates <span class="math inline">\(C\)</span> that are not causally affected by <span class="math inline">\(X\)</span>. This can be written <span class="math display">\[
  D^x \indep X \given{} C.
\]</span> If we measure <span class="math inline">\(C\)</span>, then <span class="math display">\[
  \begin{aligned}
    \Pr(D^x = 1 \given{} C)
    &amp;= \Pr(D^x = 1 \given{} C, X = x)  &amp;&amp;\text{by conditional exchangeability} \\
    &amp;= \Pr(D = 1 \given{} C, X = x)    &amp;&amp;\text{by consistency}.
  \end{aligned}
\]</span> Thus, we can estimate conditional counterfactual risks given <span class="math inline">\(C\)</span> by calculating conditional risks of disease given <span class="math inline">\(X\)</span> and <span class="math inline">\(C\)</span>. These can be used to calculate conditional measures of causal effect given <span class="math inline">\(C\)</span>, or we can calculate marginal measures of causal effect through standardization to any given distribution of <span class="math inline">\(C\)</span> (as long as the distribution of <span class="math inline">\(C\)</span> contains only values present in our population).</p>
</section>
<section id="sec-selectionbias-intro" class="level3" data-number="14.1.3">
<h3 data-number="14.1.3" class="anchored" data-anchor-id="sec-selectionbias-intro"><span class="header-section-number">14.1.3</span> Selection bias and the analytic cohort condition</h3>
<p>Under exchangeability, we have <span class="math inline">\(\Pr(D^x = 1) = \Pr(D = 1 \given{} X = x)\)</span> in our population. However, we typically do not observe the entire population. Instead, we observe a sample of the population. This could be a random sample of the population or a sample selected by exposure (in a cohort study) or by disease (in a case-control study). Let <span class="math inline">\(S\)</span> indicate selection into the study, so <span class="math inline">\(S = 1\)</span> for members of our study sample and <span class="math inline">\(S = 0\)</span> for everyone else. <strong>Selection bias</strong> occurs when selection into the study distorts the true association between <span class="math inline">\(X\)</span> and <span class="math inline">\(D\)</span> in the population elegible for the study <span class="citation" data-cites="berkson1946limitations hernan2004structural">(<a href="references.html#ref-berkson1946limitations" role="doc-biblioref">Berkson 1946</a>; <a href="references.html#ref-hernan2004structural" role="doc-biblioref">Hernán, Hernández-Dı́az, and Robins 2004</a>)</span>. Confounding is specific to causal inference, but selection bias can affect both causal inference and prediction (i.e., both analytic and descriptive epidemiology).</p>
<p>Using the data from our study, we cannot calculate <span class="math inline">\(\Pr(D = 1 \given{} X = x)\)</span> directly. Instead, we can calculate <span class="math display">\[
  \Pr(D = 1 \given{} X = x, S = 1).
\]</span> We would like to have <span class="math display">\[
  \Pr(D^x = 1)
  = \Pr(D = 1 \given{} X = x)
  = \Pr(D = 1 \given{} X = x, S = 1).
\]</span> However, exchangeability in the population implies only the first equality. To guarantee the second equality, we need to have the <strong>analytic cohort condition</strong> <span class="citation" data-cites="kenah2023potential">(<a href="references.html#ref-kenah2023potential" role="doc-biblioref">Kenah 2023</a>)</span> where <span class="math display">\[
  S^x \indep D^x \given{} X.
\]</span> In other words, if we intervene to set <span class="math inline">\(X = x\)</span>, the potential disease outcome <span class="math inline">\(D^x\)</span> and potential selection <span class="math inline">\(S^x\)</span> are independent of each other. To estimate a risk of disease accurately, selection into the study must be independent of disease outcome.</p>
<p>With both exchangeability and the analytic cohort condition, we get <span class="math display">\[
  \begin{aligned}
    \Pr(D^x = 1)
    &amp;= \Pr(D^x = 1 \given{} X = x)            &amp;&amp;\text{by exchangeability} \\
    &amp;= \Pr(D^x = 1 \given{} X = x, S^x = 1)   &amp;&amp;\text{by the analytic cohort condition} \\
    &amp;= \Pr(D = 1 \given{} X = x, S = 1)       &amp;&amp;\text{by consistency.}
  \end{aligned}
\]</span> Therefore, we can estimate causal measures of the effect of <span class="math inline">\(X\)</span> using data from our cohort study.</p>
<p>When the analytic cohort condition fails, we might still have a conditional analytic cohort condition <span class="citation" data-cites="kenah2023potential">(<a href="references.html#ref-kenah2023potential" role="doc-biblioref">Kenah 2023</a>)</span> where <span class="math display">\[
  S^x \indep D^x \given{} (X, C)
\]</span> for a set <span class="math inline">\(C\)</span> of measured covariates that are not causally affected by <span class="math inline">\(X\)</span>. If the analytic cohort condition holds given <span class="math inline">\(C\)</span>, then <span class="math display">\[
  \begin{aligned}
    \Pr(D^x = 1 \given{} C)
    &amp;= \Pr(D^x = 1 \given{} C, X = x)            &amp;&amp;\text{by exchangeability} \\
    &amp;= \Pr(D^x = 1 \given{} C, X = x, S^x = 1)   &amp;&amp;\text{by the analytic cohort condition} \\
    &amp;= \Pr(D = 1 \given{} C, X = x, S = 1)       &amp;&amp;\text{by consistency.}
  \end{aligned}
\]</span> Therefore, we can estimate conditional counterfactual risks given <span class="math inline">\(C\)</span> by calculating conditional risks of disease given <span class="math inline">\(X\)</span> and <span class="math inline">\(C\)</span> in our cohort study. These can be used to calculate conditional measures of causal effect given <span class="math inline">\(C\)</span>, or we can calculate marginal measures of causal effect through standardization to any given distribution of <span class="math inline">\(C\)</span> (as long as the distribution of <span class="math inline">\(C\)</span> contains only values present in our study sample).</p>
</section>
</section>
<section id="attributable-risk" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="attributable-risk"><span class="header-section-number">14.2</span> Attributable risk</h2>
<p>Measures of attributable risk attempt to measure the proportion of a given disease that could be prevented by preventing a given exposure, either among the exposed or in the entire population. These measures implicitly assume that the observed difference in the occurrence of disease between the exposed and the unexposed represents a causal effect. In other words, they assume that the disease occurrence among the unexposed represents what would have happened among the exposed if exposure had been prevented.</p>
<section id="sufficient-component-cause-model-causal-pies" class="level3" data-number="14.2.1">
<h3 data-number="14.2.1" class="anchored" data-anchor-id="sufficient-component-cause-model-causal-pies"><span class="header-section-number">14.2.1</span> Sufficient-component cause model (causal pies)</h3>
<p><span class="citation" data-cites="rothman1976causes">Rothman (<a href="references.html#ref-rothman1976causes" role="doc-biblioref">1976</a>)</span> proposed a model of causation now known as the <strong>sufficient-component cause model</strong>. A <strong>sufficient cause</strong> of disease is one that will inevitably lead to the disease, possibly after a period of time called the <em>induction period</em> <span class="citation" data-cites="rothman2008modern">(<a href="references.html#ref-rothman2008modern" role="doc-biblioref">Rothman, Greenland, and Lash 2008</a>)</span>. Each sufficient cause is called a <strong>causal pie</strong>, and it is made up of one or more component causes. The loss of any one of these component causes will destroy the sufficient cause. A given disease can have more than one sufficient cause, so the removal of one sufficient cause may not prevent the disease. However, the removal of a sufficient cause can delay the onset of disease if the disarmed sufficient cause would have been the one that first caused disease (after being completed and going through its induction period).</p>
<p>A component cause is a <strong>necessary cause</strong> of a disease if it is a component of all possible sufficient causes of the disease. A component cause is a <strong>sufficient cause</strong> of a disease if it constitutes a sufficient cause all by itself. Removing a necessary cause will prevent all cases of a disease (e.g., smallpox eradication), but removing a sufficient cause leaves open the possibility that some other sufficient cause will induce the disease. However, most exposures of interest in public health are neither necessary nor sufficient to produce a given disease:</p>
<blockquote class="blockquote">
<p>Most causes that are of interest in the health field are components of sufficient causes, but are not sufficient in themselves. Drinking contaminated water is not sufficient to produce cholera, and smoking is not sufficient to produce lung cancer, but both of these are components of sufficient causes. Identification of all the components of a given sufficient cause is unnecessary for prevention, in that blocking the causal role of but one component renders the joint action of the other causes insufficient, and prevents the effect. <span class="citation" data-cites="rothman1976causes">(<a href="references.html#ref-rothman1976causes" role="doc-biblioref">Rothman 1976</a>)</span>.</p>
</blockquote>
<p>The apparent strength of a risk factor for is determined by the context in which it occurs as well as the biology of the disease. The relative risk (e.g., the risk difference, risk ratio, odds ratio, or hazard ratio) associated with an exposure <span class="math inline">\(X\)</span> will depend on the prevalence of the other components of the sufficient causes in which it is a component. If the other components of those sufficient causes have low prevalence, few people will develop disease upon exposure to <span class="math inline">\(X\)</span> (because the addition of <span class="math inline">\(X\)</span> does not complete any sufficient cause) and the relative risk associated with exposure to <span class="math inline">\(X\)</span> will be small. If the other components have high prevalence, many people will develop disease upon exposure to <span class="math inline">\(X\)</span> (because exposure to <span class="math inline">\(X\)</span> completes at least one sufficient cause) and the relative risk associated with <span class="math inline">\(X\)</span> will be large. <span class="citation" data-cites="rothman1976causes">Rothman (<a href="references.html#ref-rothman1976causes" role="doc-biblioref">1976</a>)</span> gives the example of phenylketonuria (PKU), a genetic disorder that results in decreased metabolism of the amino acid phenylalanine:</p>
<blockquote class="blockquote">
<p>…&nbsp;in a society where most people eat high phenylananine diets, the inheritance of the (rare) gene for PKU would appear to be a “strong” risk factor for phenylketonuric [intellectual disability], and phenylananine in the diet would appear to be a weak risk factor. In another society, however, in which the gene for PKU is very common and few people eat high phenylalanine diets, inheritance of the gene would be a weak risk factor and phenylalanine in the diet would be a strong risk factor.</p>
</blockquote>
</section>
<section id="attributable-risk-among-the-exposed" class="level3" data-number="14.2.2">
<h3 data-number="14.2.2" class="anchored" data-anchor-id="attributable-risk-among-the-exposed"><span class="header-section-number">14.2.2</span> Attributable risk among the exposed</h3>
<p>The <strong>attributable risk among the exposed</strong> is the proportion of risk among the exposed that is due to exposure. For simplicity, we assume that exposure is defined so that the exposed have higher or equal risk of disease. Let <span class="math inline">\(p_1\)</span> denote the cumulative incidence (risk) among the exposed in a given time interval, and let <span class="math inline">\(p_0\)</span> denote the cumulative incidence among the unexposed in the same interval. Then <span id="eq-attrisk"><span class="math display">\[
  \AR = \frac{p_1 - p_0}{p_1} = \frac{\RR - 1}{\RR}
\tag{14.1}\]</span></span> where <span class="math inline">\(\RR = p_1 / p_0\)</span> is the risk ratio <span class="citation" data-cites="levin1953occurrence cole1971attributable">(<a href="references.html#ref-levin1953occurrence" role="doc-biblioref">Levin 1953</a>; <a href="references.html#ref-cole1971attributable" role="doc-biblioref">Cole and MacMahon 1971</a>)</span>. The second equality holds only when <span class="math inline">\(p_0 &gt; 0\)</span>, but the first equality holds even when <span class="math inline">\(p_0 = 0\)</span>. This is meant to measure the decrease in the risk among the exposed that would occur if exposure could be prevented.</p>
</section>
<section id="population-attributable-risk" class="level3" data-number="14.2.3">
<h3 data-number="14.2.3" class="anchored" data-anchor-id="population-attributable-risk"><span class="header-section-number">14.2.3</span> Population attributable risk</h3>
<p>The <strong>population attributable risk</strong> is the proportion of risk in the population that is due to exposure. If the prevalence of exposure is <span class="math inline">\(\pi\)</span>, then the total risk in the population is <span class="math display">\[
  (1 - \pi) p_0 + \pi p_1 = p_0 + \pi (p_1 - p_0).
\]</span> The excess risk in the population due to exposure is <span class="math inline">\(\pi (r_1 - r_0)\)</span>, so the population attributable risk <span class="citation" data-cites="levin1953occurrence cole1971attributable">(<a href="references.html#ref-levin1953occurrence" role="doc-biblioref">Levin 1953</a>; <a href="references.html#ref-cole1971attributable" role="doc-biblioref">Cole and MacMahon 1971</a>)</span> is <span class="math display">\[
  \PAR = \frac{\pi (p_1 - p_0)}{p_0 + \pi (p_1 - p_0)} = \frac{\pi (\RR - 1)}{1 + \pi (\RR - 1)}.
\]</span> When <span class="math inline">\(\pi = 1\)</span>, this is equal to the attributable risk among the exposed. This is meant to measure the decrease in risk in the population that would occur if exposure could be prevented.</p>
<p>When the odds ratio from a case control study approximates the risk ratio (as in a cumulative case-control study with a rare disease or a case-cohort study), the <span class="math inline">\(\AR\)</span> can be estimated using case-control data and the <span class="math inline">\(\PAR\)</span> can be estimated using case-control data and the prevalence of exposure. These measures can be adjusted for confounding and effect measure modification, and they can be redefined to estimate the proportion of cases prevented by an exposure or treatment associated with reduced risk <span class="citation" data-cites="miettinen1974proportion">(<a href="references.html#ref-miettinen1974proportion" role="doc-biblioref">Miettinen 1974</a>)</span>.</p>
</section>
<section id="dependence-on-time-interval" class="level3" data-number="14.2.4">
<h3 data-number="14.2.4" class="anchored" data-anchor-id="dependence-on-time-interval"><span class="header-section-number">14.2.4</span> Dependence on time interval</h3>
<p>Both measures of attributable risk depend on the time interval considered. For example, suppose individuals in our population have exponential(<span class="math inline">\(\lambda = 1\)</span>) lifetimes when unexposed and exponential(<span class="math inline">\(\lambda = 2\)</span>) lifetimes when exposed. In the time interval <span class="math inline">\((0, t]\)</span>, the attibutable risk among the exposed is <span class="math display">\[
  \AR(t)
  = \frac{\big(1 - e^{-2 t}\big) - (1 - e^{-t})}{1 - e^{-2 t}}
  = \frac{e^{-t} - e^{-2 t}}{1 - e^{-2 t}}.
\]</span> As <span class="math inline">\(t\)</span> approaches zero from above (i.e., <span class="math inline">\(t \downarrow 0\)</span>), <span class="math inline">\(\AR(t) \rightarrow 1 / 2\)</span> (which can be shown using l’H^{o}pital’s rule). As <span class="math inline">\(t \rightarrow \infty\)</span>, <span class="math inline">\(\AR(t) \rightarrow 0\)</span>.</p>
</section>
<section id="adding-up-attributable-risks" class="level3" data-number="14.2.5">
<h3 data-number="14.2.5" class="anchored" data-anchor-id="adding-up-attributable-risks"><span class="header-section-number">14.2.5</span> Adding up attributable risks</h3>
<p>If we have several different causes of disease, the attributable risk among the exposed for all of them can add up to more than one. For example, imagine that disease can only occur if a person has both exposure <span class="math inline">\(X\)</span> and exposure <span class="math inline">\(Y\)</span>. The attributable risk among the exposed for <span class="math inline">\(X\)</span> would be <span class="math display">\[
  \AR_X = \frac{p_1 - 0}{p_1} = 1,
\]</span> where <span class="math inline">\(p_1\)</span> is the risk among individuals who have <span class="math inline">\(X = 1\)</span>. Similarly, the attributable risk among the exposed for <span class="math inline">\(Y\)</span> would be <span class="math inline">\(\AR_Y = 1\)</span>. Thus, we would have <span class="math inline">\(\AR_X + \AR_Y = 2\)</span>. The sufficient-component cause model is useful for understanding why attributable risks for all possible causes could add up to more than one.</p>
</section>
</section>
<section id="excess-and-etiologic-cases" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="excess-and-etiologic-cases"><span class="header-section-number">14.3</span> Excess and etiologic cases</h2>
<p>While measures of attributable risk are straighforward to calculate, their interpretation is more difficult than it seems at first. <span class="citation" data-cites="greenland1988conceptual">Greenland and Robins (<a href="references.html#ref-greenland1988conceptual" role="doc-biblioref">1988</a>)</span> pointed out two different meanings of the concept “attributable to exposure” that are often used interchangeably:</p>
<ul>
<li><p>Cases for which exposure played a causal role, which they called <strong>etiologic cases</strong>.</p></li>
<li><p>Cases that would not have occurred if exposure had not occurred, which they called <strong>excess cases</strong>.</p></li>
</ul>
<p>All excess cases are etiologic cases, but not all etiologic cases are excess cases. This becomes easier to see if we explicitly consider the potential times to onset of disease with and without exposure. Assume that we are following study participants over an interval <span class="math inline">\((0, t]\)</span>. Let <span class="math inline">\(T^0_j\)</span> be the time to disease onset in person <span class="math inline">\(j\)</span> under no exposure and <span class="math inline">\(T^1_j\)</span> be the corresponding time to disease onset under exposure. Because we assume exposure does not prevent disease, we have <span class="math inline">\(T^1_j \leq T^0_j\)</span>.</p>
<ul>
<li><p>If <span class="math inline">\(T^1_j = T^0_j\)</span>, then exposure has no effect on disease in person <span class="math inline">\(j\)</span> and <span class="math inline">\(j\)</span> is not an etiologic case.</p></li>
<li><p>If <span class="math inline">\(T^1_j &lt; T^0_j\)</span>, then exposure has an effect on disease in person <span class="math inline">\(j\)</span> and <span class="math inline">\(j\)</span> is an etiologic case.</p></li>
</ul>
<p>For <span class="math inline">\(j\)</span> to be an excess case, we must have <span class="math inline">\(T^1_j \leq t\)</span> (so that <span class="math inline">\(j\)</span> becomes a case when exposed) and <span class="math inline">\(t &lt; T^0_j\)</span> (so that <span class="math inline">\(j\)</span> is not a case when not exposed). In other words, we need <span class="math inline">\(T^1_j \leq t &lt; T^0_j\)</span>. This is possible only when <span class="math inline">\(T^1_j &lt; T^0_j\)</span>, so <span class="math inline">\(j\)</span> can be an excess case only if they are also an etiologic case. An etiologic case becomes an excess case only if exposure reduces the time to onset enough that they become a case during the follow-up period.</p>
<section id="excess-and-etiologic-fractions" class="level3" data-number="14.3.1">
<h3 data-number="14.3.1" class="anchored" data-anchor-id="excess-and-etiologic-fractions"><span class="header-section-number">14.3.1</span> Excess and etiologic fractions</h3>
<p>Because an individual can be an excess case only if they are also an etiologic case, there are three types of cases that we detect. Suppose we have the following numbers of cases:</p>
<ul>
<li><p><span class="math inline">\(A_0\)</span> cases whose onsets time is not affected by exposure (non-etiologic cases).</p></li>
<li><p><span class="math inline">\(A_1\)</span> etiologic cases who are not excess cases (i.e., they are cases with or without exposure).</p></li>
<li><p><span class="math inline">\(A_2\)</span> etiologic cases who are also excess cases (i.e., they are cases only with exposure).</p></li>
</ul>
<p>Let <span class="math inline">\(M = A_0 + A_1 + A_2\)</span> be the total number of cases. The <strong>etiologic fraction</strong> is the proportion of cases that are etiologic cases: <span class="math display">\[
  \text{etiologic fraction} = \frac{A_1 + A_2}{M}.
\]</span> The <strong>excess fraction</strong> is the proportion of cases that are excess cases: <span class="math display">\[
  \text{excess fraction} = \frac{A_2}{M}.
\]</span> The excess fraction is always less than or equal to the etiologic fraction.</p>
<p>If we observed a total of <span class="math inline">\(N\)</span> exposed individuals and detected <span class="math inline">\(M\)</span> cases, then the risk of disease over the time interval <span class="math inline">\((0, t]\)</span> is <span class="math display">\[
  p_1
  = \frac{M}{N}
  = \frac{A_0 + A_1 + A_2}{N}.
\]</span> Without exposure, we would have detected <span class="math inline">\(A_0 + A_1\)</span> cases and the risk of disease would have been <span class="math display">\[
  p_0
  = \frac{A_0 + A_1}{N}.
\]</span> The attributable risk among the exposed would be <span class="math display">\[
  \frac{p_1 - p_0}{p_1}
  = \frac{(A_0 + A_1 + A_2) - (A_0 + A_1)}{A_0 + A_1 + A_2}
  = \frac{A_2}{M},
\]</span> which is the excess fraction. Similarly, the population attributable risk is <span class="math display">\[
  \frac{\pi (p_1 - p_0)}{p_0 + \pi (p_1 - p_0)}
  = \frac{\pi A_2}{A_0 + A_1 + p A_2}
\]</span> when the prevalence of exposure is <span class="math inline">\(p\)</span>. The <span class="math inline">\(A_1\)</span> etiologic cases who are not excess cases have disease onset earlier because of exposure, so they are cases caused by exposure who are not captured in either measure of attributable risk. Because we cannot see both <span class="math inline">\(T^1\)</span> and <span class="math inline">\(T^0\)</span> for any individual, there is no way to estimate the proportion of cases who are of this type without strong assumptions <span class="citation" data-cites="greenland1988conceptual">(<a href="references.html#ref-greenland1988conceptual" role="doc-biblioref">Greenland and Robins 1988</a>)</span>.</p>
<p>To estimate the etiologic fraction, we need to make assumptions about the joint distribution of the potential disease onset times <span class="math inline">\(T^0\)</span> and <span class="math inline">\(T^1\)</span> that are difficult to justify or refute. Even if we can accurately estimate the distribution of times to disease onset in the exposed and the unexposed, the marginal distributions of <span class="math inline">\(T_0\)</span> and <span class="math inline">\(T_1\)</span> do not tell us what their joint distribution is. Under some models for <span class="math inline">\(T_0\)</span> and <span class="math inline">\(T_1\)</span>, the etiologic fraction can be estimated by replacing the risk ratio in <a href="#eq-attrisk" class="quarto-xref">Equation&nbsp;<span>14.1</span></a> with a hazard ratio. Under slightly weaker assumptions, this will give us a lower bound for the etiologic fraction <span class="citation" data-cites="robins1989estimability">(<a href="references.html#ref-robins1989estimability" role="doc-biblioref">Robins and Greenland 1989</a>)</span>.</p>
</section>
<section id="limitations-of-the-etiologic-fraction" class="level3" data-number="14.3.2">
<h3 data-number="14.3.2" class="anchored" data-anchor-id="limitations-of-the-etiologic-fraction"><span class="header-section-number">14.3.2</span> Limitations of the etiologic fraction</h3>
<p>The etiologic fraction, if it could be calculated, would usually be a more complete measure of the proportion of cases caused by a given exposure than the excess fraction. However, <span class="citation" data-cites="greenland1988conceptual">Greenland and Robins (<a href="references.html#ref-greenland1988conceptual" role="doc-biblioref">1988</a>)</span> give a cautionary example:</p>
<blockquote class="blockquote">
<p>Unfortunately, even if we know exactly what the etiologic fraction is, it is not necessarily a useful measure of the effect of exposure on disease occurrence. To see this, compare the impact of the genetic conditions that produce Tay-Sachs disease and Huntington’s chorea. Both conditions lead to premature death, and both may be considered to have etiologic fractions for death (among the exposed) that approach one. Nevertheless, persons who develop Tay-Sachs disease die in early childhood, whereas persons who develop Huntington’s chorea usually survive well into adulthood and can lead rich, if shortened, lives. The etiologic fraction is not sensitive to this distinction.</p>
</blockquote>
<p>They continue the example to illustrate how survival analysis can clarify the relationship between exposure and disease:</p>
<blockquote class="blockquote">
<p>Interestingly, in the preceding example, the excess fraction at age 20 years would clearly distinguish the two conditions (since it would be near one for Tay-Sachs and near zero for Huntington’s chorea), as would the incidence density [hazard] fraction in early childhood. More generally, we would suggest turning attention to direct measures of exposure effect on incidence time whenever the latter is important.</p>
</blockquote>
</section>
</section>
<section id="sensitivity-analysis" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="sensitivity-analysis"><span class="header-section-number">14.4</span> Sensitivity analysis</h2>
<section id="cornfields-inequality" class="level3" data-number="14.4.1">
<h3 data-number="14.4.1" class="anchored" data-anchor-id="cornfields-inequality"><span class="header-section-number">14.4.1</span> Cornfield’s inequality</h3>
<p><span class="citation" data-cites="cornfield1959smoking">Cornfield et al. (<a href="references.html#ref-cornfield1959smoking" role="doc-biblioref">1959</a>)</span> was a vigorous and lucid defense of the idea that smoking causes lung cancer. One of the arguments against this was the “constitutional hypothesis” that there was an underlying difference between smokers and nonsmokers that explained the difference in lung cancer risks. Using statistics alone, there is almost no way to prove that this is not true. However, the result now known as <strong>Cornfield’s inequality</strong> does show that any such underlying difference would have to be implausibly large.</p>
<p>Suppose there is a true causal exposure or characteristic <span class="math inline">\(X\)</span> such that the risk of lung cancer over a given age interval <span class="math inline">\((a, b]\)</span> is <span class="math inline">\(p_1\)</span> among those with <span class="math inline">\(X = 1\)</span> and <span class="math inline">\(p_0\)</span> for those with <span class="math inline">\(X = 0\)</span>. Now suppose the prevalence of <span class="math inline">\(X\)</span> is <span class="math inline">\(\pi_1\)</span> among smokers and <span class="math inline">\(\pi_0\)</span> among nonsmokers. We assume that <span class="math inline">\(p_1 &gt; p_0\)</span> (so <span class="math inline">\(X\)</span> is a risk factor for lung cancer) and <span class="math inline">\(p_1 &gt; p_0\)</span> (so <span class="math inline">\(X\)</span> is positively associated with smoking), and we assume that smoking has no effect on lung cancer other than its association with <span class="math inline">\(X\)</span>. Over the age interval <span class="math inline">\((a, b]\)</span>, the risk of lung cancer among smokers is <span class="math display">\[
  p_\text{smk} = \pi_1 p_1 + (1 - \pi_1) p_0,
\]</span> and the risk of lung cancer among nonsmokers is <span class="math display">\[
  p_\text{non} = \pi_0 p_1 + (1 - \pi_0) p_0.
\]</span> The risk ratio for lung cancer associated with smoking is <span id="eq-Cornfield"><span class="math display">\[
  \frac{p_\text{smk}}{p_\text{non}}
  = \frac{\pi_1 p_1 + (1 - \pi_1) p_0}{\pi_0 p_0 + (1 - \pi_0) p_0}
  = \frac{\pi_1 \frac{p_1}{p_0} + (1 - \pi_1)}{\pi_0 \frac{p_1}{p_0} + (1 - \pi_0)}.
\tag{14.2}\]</span></span> The derivative of the function <span class="math display">\[
  f(x) = \frac{\pi_1 x + (1 - \pi_1)}{\pi_0 x + (1 - \pi_0)}
\]</span> is strictly positive for all <span class="math inline">\(x\)</span> when <span class="math inline">\(\pi_1 &gt; \pi_0\)</span>, so <span class="math inline">\(f(x)\)</span> always increases as <span class="math inline">\(x\)</span> increases. As <span class="math inline">\(x \rightarrow \infty\)</span>, we have <span class="math inline">\(f(x) \rightarrow \pi_1 / \pi_0\)</span>. Therefore, <span class="math display">\[
  \frac{p_\text{smk}}{p_\text{non}}
  = f\Bigl(\frac{r_1}{r_0}\Bigr)
  &lt; \frac{\pi_1}{\pi_0}.
\]</span> Thus the risk ratio associated with smoking has to be less than the ratio of the prevalence of <span class="math inline">\(X\)</span> among smokers to the prevalence of <span class="math inline">\(X\)</span> among nonsmokers.</p>
<p><span class="citation" data-cites="cornfield1959smoking">Cornfield et al. (<a href="references.html#ref-cornfield1959smoking" role="doc-biblioref">1959</a>)</span> cite a result from a study of holders of US government life insurance that was available only to veterans who served in the US Armed Forces between 1917 and 1949 <span class="citation" data-cites="dorn1959tobacco">(<a href="references.html#ref-dorn1959tobacco" role="doc-biblioref">Dorn 1959</a>)</span>. In this group, there were 187 deaths from lung cancer among cigarette smokers between July, 1954 and December, 1956. Based on age-specific rates of death from lung cancer among never-smokers and occasional smokers, the expected number of deaths was 20. This implies a risk ratio of <span class="math inline">\(187 / 20 = 9.35\)</span>. To explain this using an unobserved cause <span class="math inline">\(X\)</span> of death from lung cancer that was associated with cigarette smoking, we would need <span class="math display">\[
  \frac{p_1}{p_0} \geq 9.35.
\]</span> The prevalence of <span class="math inline">\(X\)</span> among nonsmokers could be at most <span class="math inline">\(1 / 9.35 \approx 0.107\)</span>.</p>
<p>Even more, we can have <span class="math inline">\(\pi_1 / \pi_0 = 9.35\)</span> only if the risk ratio <span class="math inline">\(p_1 / p_0 = \infty\)</span>, which would happen only if <span class="math inline">\(X\)</span> was a necessary cause of death from lung cancer. We can rearrange <a href="#eq-Cornfield" class="quarto-xref">Equation&nbsp;<span>14.2</span></a> to get <span class="math display">\[
  \pi_0
  \leq \frac{\frac{p_1}{p_0} -
    \frac{p_\text{smk}}{p_\text{non}}}{\frac{p_\text{smk}}{p_\text{non}} \Big(\frac{p_1}{p_0} - 1\Big)}
\]</span> This shows that we must have <span class="math display">\[
  \frac{p_1}{p_0}
  &gt; \frac{p_\text{smk}}{p_\text{non}}.
\]</span> If we have <span class="math inline">\(p_1 / p_0 = 100\)</span>, we have <span class="math inline">\(p_0 \leq 0.098\)</span> and <span class="math inline">\(\pi_1 / \pi_0 &gt; 10.2\)</span>. If <span class="math inline">\(p_1 / p_0 = 10\)</span>, we have <span class="math inline">\(\pi_0 \leq 0.0077\)</span> and <span class="math inline">\(\pi_1 / \pi_0 &gt; 129.46\)</span>. The constitutional hypothesis is workable only if there is an undiscovered gene, hormone, or other covariate that is an extraordinarily strong predictor of both cigarette smoking and death from lung cancer.</p>
<p>With a relative risk of 9.35, the attributable risk of death from lung cancer among cigarette smokers is <span class="math display">\[
  \frac{9.35 - 1}{9.35} = 0.89,
\]</span> which is equal to the excess fraction. The etiologic fraction of death from lung cancer due to smoking is at least this large and almost certainly larger.</p>
</section>
<section id="e-values" class="level3" data-number="14.4.2">
<h3 data-number="14.4.2" class="anchored" data-anchor-id="e-values"><span class="header-section-number">14.4.2</span> E-values</h3>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-berkson1946limitations" class="csl-entry" role="listitem">
Berkson, Joseph. 1946. <span>“Limitations of the Application of Fourfold Table Analysis to Hospital Data.”</span> <em>Biometrics Bulletin</em> 2 (3): 47–53.
</div>
<div id="ref-cole1971attributable" class="csl-entry" role="listitem">
Cole, Philip, and Brian MacMahon. 1971. <span>“Attributable Risk Percent in Case-Control Studies.”</span> <em>British Journal of Preventive &amp; Social Medicine</em> 25 (4): 242.
</div>
<div id="ref-cornfield1959smoking" class="csl-entry" role="listitem">
Cornfield, Jerome, William Haenszel, E Cuyler Hammond, Abraham M Lilienfeld, Michael B Shimkin, and Ernst L Wynder. 1959. <span>“Smoking and Lung Cancer: Recent Evidence and a Discussion of Some Questions.”</span> <em>Journal of the National Cancer Institute</em> 22 (1): 173–203.
</div>
<div id="ref-dorn1959tobacco" class="csl-entry" role="listitem">
Dorn, Harold F. 1959. <span>“Tobacco Consumption and Mortality from Cancer and Other Diseases.”</span> <em>Public Health Reports</em> 74 (7): 581.
</div>
<div id="ref-greenland1986identifiability" class="csl-entry" role="listitem">
Greenland, Sander, and James M Robins. 1986. <span>“Identifiability, Exchangeability, and Epidemiological Confounding.”</span> <em>International Journal of Epidemiology</em> 15 (3): 413–19.
</div>
<div id="ref-greenland1988conceptual" class="csl-entry" role="listitem">
———. 1988. <span>“Conceptual Problems in the Definition and Interpretation of Attributable Fractions.”</span> <em>American Journal of Epidemiology</em> 128 (6): 1185–97.
</div>
<div id="ref-hernan2004structural" class="csl-entry" role="listitem">
Hernán, Miguel Á, Sonia Hernández-Dı́az, and James M Robins. 2004. <span>“A Structural Approach to Selection Bias.”</span> <em>Epidemiology</em> 15 (5): 615–25.
</div>
<div id="ref-kenah2023potential" class="csl-entry" role="listitem">
Kenah, Eben. 2023. <span>“A Potential Outcomes Approach to Selection Bias.”</span> <em>Epidemiology</em> 34 (6): 865–72.
</div>
<div id="ref-levin1953occurrence" class="csl-entry" role="listitem">
Levin, M L. 1953. <span>“The Occurrence of Lung Cancer in Man.”</span> <em>Acta-Unio Internationalis Contra Cancrum</em> 9 (3): 531–41.
</div>
<div id="ref-miettinen1974proportion" class="csl-entry" role="listitem">
Miettinen, Olli S. 1974. <span>“Proportion of Disease Caused or Prevented by a Given Exposure, Trait or Intervention.”</span> <em>American Journal of Epidemiology</em> 99 (5): 325–32.
</div>
<div id="ref-pearl1993bayesian" class="csl-entry" role="listitem">
Pearl, Judea. 1993. <span>“[Bayesian Analysis in Expert Systems]: Comment: Graphical Models, Causality and Intervention.”</span> <em>Statistical Science</em> 8 (3): 266–69.
</div>
<div id="ref-pearl1995causal" class="csl-entry" role="listitem">
———. 1995. <span>“Causal Diagrams for Empirical Research.”</span> <em>Biometrika</em> 82 (4): 669–88.
</div>
<div id="ref-robins1989estimability" class="csl-entry" role="listitem">
Robins, James M, and Sander Greenland. 1989. <span>“Estimability and Estimation of Excess and Etiologic Fractions.”</span> <em>Statistics in Medicine</em> 8 (7): 845–59.
</div>
<div id="ref-rose1985sick" class="csl-entry" role="listitem">
Rose, Geoffrey. 1985. <span>“Sick Individuals and Sick Populations.”</span> <em>International Journal of Epidemiology</em> 14: 32–38.
</div>
<div id="ref-rosenbaum1983central" class="csl-entry" role="listitem">
Rosenbaum, Paul R, and Donald B Rubin. 1983. <span>“The Central Role of the Propensity Score in Observational Studies for Causal Effects.”</span> <em>Biometrika</em> 70 (1): 41–55.
</div>
<div id="ref-rothman1976causes" class="csl-entry" role="listitem">
Rothman, Kenneth J. 1976. <span>“Causes.”</span> <em>American Journal of Epidemiology</em> 104 (6): 587–92.
</div>
<div id="ref-rothman2008modern" class="csl-entry" role="listitem">
Rothman, Kenneth J, Sander Greenland, and Timothy L Lash. 2008. <em>Modern Epidemiology</em>. Lippincott Williams &amp; Wilkins.
</div>
<div id="ref-rubin1974estimating" class="csl-entry" role="listitem">
Rubin, Donald B. 1974. <span>“Estimating Causal Effects of Treatments in Randomized and Nonrandomized Studies.”</span> <em>Journal of Educational Psychology</em> 66 (5): 688.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./causality.html" class="pagination-link" aria-label="Causality in Public Health">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Causality in Public Health</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./dags.html" class="pagination-link" aria-label="Confounding and Selection Bias on DAGs">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Confounding and Selection Bias on DAGs</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>